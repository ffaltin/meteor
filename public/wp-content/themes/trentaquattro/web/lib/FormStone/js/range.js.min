!function(a,t,e){"use strict";function n(a){C.iterate.call(F,c)}function i(){F=a(g.element)}function s(a){a.formatter||(a.formatter=b),a.min=parseFloat(this.attr("min"))||0,a.max=parseFloat(this.attr("max"))||100,a.step=parseFloat(this.attr("step"))||1,a.digits=a.step.toString().length-a.step.toString().indexOf("."),a.value=parseFloat(this.val())||a.min+(a.max-a.min)/2;var t="";a.disbaled=this.is(":disabled"),a.vertical="vertical"===this.attr("orient")||a.vertical,t+='<div class="'+k.track+'">',t+='<div class="'+k.handle+'">',t+='<span class="'+k.marker+'"></span>',t+="</div>",t+="</div>";var e=[k.base,a.customClass,a.vertical?k.vertical:"",a.labels?k.labels:"",a.disabled?k.disabled:""];if(this.addClass(k.element).wrap('<div class="'+e.join(" ")+'"></div>').after(t),a.$container=this.parents(g.base),a.$track=a.$container.find(g.track),a.$handle=a.$container.find(g.handle),a.$output=a.$container.find(g.output),a.labels){var n='<span class="'+[k.label,k.label_max].join(" ")+'">'+a.formatter.call(this,a.labels.max?a.labels.max:a.max)+"</span>",s='<span class="'+[k.label,k.label_min].join(" ")+'">'+a.formatter.call(this,a.labels.max?a.labels.min:a.min)+"</span>";a.$container.prepend(a.vertical?n:s).append(a.vertical?s:n)}a.$labels=a.$container.find(g.label),this.on(x.focus,a,f).on(x.blur,a,p).on(x.change,a,h),a.$container.fsTouch({pan:!0,axis:a.vertical?"y":"x"}).on(x.panStart,a,d).on(x.pan,a,m).on(x.panEnd,a,u),i(),c.call(this,a)}function l(a){a.$container.off(x.namespace).fsTouch("destroy"),a.$track.remove(),a.$labels.remove(),this.unwrap().removeClass(k.element).off(x.namespace),i()}function r(a){a.disabled&&(this.prop("disabled",!1),a.$container.removeClass(k.disabled),a.disabled=!1)}function o(a){a.disabled||(this.prop("disabled",!0),a.$container.addClass(k.disabled),a.disabled=!0)}function c(a){a.stepCount=(a.max-a.min)/a.step,a.offset=a.$track.offset(),a.vertical?(a.trackHeight=a.$track.outerHeight(),a.handleHeight=a.$handle.outerHeight(),a.increment=a.trackHeight/a.stepCount):(a.trackWidth=a.$track.outerWidth(),a.handleWidth=a.$handle.outerWidth(),a.increment=a.trackWidth/a.stepCount);var t=(a.$el.val()-a.min)/(a.max-a.min);v(a,t,!0)}function d(a){C.killEvent(a);var t=a.data;t.disbaled||(m(a),t.$container.addClass(k.focus))}function m(a){C.killEvent();var t=a.data,e=0;e=t.vertical?1-(a.pageY-t.offset.top)/t.trackHeight:(a.pageX-t.offset.left)/t.trackWidth,v(t,e)}function u(a){C.killEvent(a);var t=a.data;t.$container.removeClass(k.focus)}function f(a){a.data.$container.addClass("focus")}function p(a){a.data.$container.removeClass("focus")}function v(a,t,e){a.increment>1&&(t=a.vertical?Math.round(t*a.stepCount)*a.increment/a.trackHeight:Math.round(t*a.stepCount)*a.increment/a.trackWidth),0>t&&(t=0),t>1&&(t=1);var n=(a.min-a.max)*t;n=-parseFloat(n.toFixed(a.digits)),a.$handle.css(a.vertical?"bottom":"left",100*t+"%"),n+=a.min,n!==a.value&&n&&e!==!0&&(a.$el.val(n).trigger(x.change,[!0]),a.value=n)}function h(a,t){var e=a.data;if(!t&&!e.disabled){var n=(e.$el.val()-e.min)/(e.max-e.min);v(e,n)}}function b(a){var t=a.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")}var $=t.Plugin("range",{widget:!0,defaults:{customClass:"",formatter:!1,labels:{max:!1,min:!1},vertical:!1},classes:["track","handle","marker","labels","label","label_min","label_max","vertical","focus","disabled"],methods:{_construct:s,_destruct:l,_resize:n,enable:r,disable:o,resize:c},events:{panStart:"panstart",pan:"pan",panEnd:"panend"}}),g=$.classes,k=g.raw,x=$.events,C=$.functions,F=[]}(jQuery,Formstone);