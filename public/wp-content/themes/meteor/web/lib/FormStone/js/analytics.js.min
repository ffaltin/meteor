!function(t,e,n){"use strict";function a(){w=e.$body}function i(){v.scrollDepth&&u()}function o(){return arguments.length&&"object"!==t.type(arguments[0])?"destroy"===arguments[0]?r.apply(this):d.apply(this,arguments):l.apply(this,arguments),null}function l(e){!T&&w.length&&(T=!0,L="function"===t.type(g.ga),M="undefined"!==t.type(g.dataLayer)&&"function"===t.type(g.dataLayer.push),v=t.extend(v,e||{}),v.autoEvents&&w.find("a").not("["+D+"]").each(s),v.scrollDepth&&(u(),y.on(S.scroll,c),y.one(S.load,i)),w.on(S.click,"*["+D+"]",f))}function r(){T&&w.length&&(y.off(S.namespace),w.off(S.namespace))}function s(){if(v.autoEvents){var e,a=t(this),i="undefined"!==t.type(a[0].href)?a[0].href:"",o=document.domain.split(".").reverse(),l=null!==i.match(o[1]+"."+o[0]);if(i.match(/^mailto\:/i))e="Email, Click, "+i.replace(/^mailto\:/i,"");else if(i.match(/^tel\:/i))e="Telephone, Click, "+i.replace(/^tel\:/i,"");else if(i.match(v.filetypes)){var r=/[.]/.exec(i)?/[^.]+$/.exec(i):n;e="File, Download:"+r[0]+", "+i.replace(/ /g,"-")}else l||(e="ExternalLink, Click, "+i);e&&a.attr(D,e)}}function c(t){x.startTimer(E,250,p)}function p(){for(var t,n=e.$window.scrollTop()+e.windowHeight,a=1/v.scrollStops,i=a,o=1;o<=v.scrollStops;o++)t=Math.round(100*i).toString(),!C[$][t].passed&&n>C[$][t].edge&&(C[$][t].passed=!0,d("ScrollDepth",$,t)),i+=a}function u(){var e,n=t.mediaquery("state"),a=w.outerHeight(),i={},o=1/v.scrollStops,l=o,r=0;n.minWidth&&($="MinWidth:"+n.minWidth+"px");for(var s=1;s<=v.scrollStops;s++)r=parseInt(a*l),e=Math.round(100*l).toString(),i[e]={edge:"100"===e?r-10:r,passsed:C[$]&&C[$][e]?C[$][e].passed:!1},l+=o;C[$]=i}function f(e){if(L||M){e.preventDefault();var n=t(this),a=n.attr("href"),i=n.data(k).split(",");for(var o in i)i.hasOwnProperty(o)&&(i[o]=t.trim(i[o]));d(i[0],i[1],i[2]||a,i[3],i[4],n)}}function d(e,a,i,o,l,r){if(L||M){var s={hitType:"event",location:g.location,title:g.document.title};if(s.eventCategory=e||n,s.eventAction=a||n,s.eventLabel=i||n,s.eventValue=o||n,s.nonInteraction=l||n,"undefined"!==t.type(r)&&!r.attr("data-analytics-stop")){var c="undefined"!==t.type(r[0].href)?r[0].href:"",p=!c.match(/^mailto\:/i)&&!c.match(/^tel\:/i)&&c.indexOf(":")<0?g.location.protocol+"//"+g.location.hostname+"/"+c:c;if(""!==c)if(r.attr("target"))g.open(p,r.attr("target"));else{var u="hitCallback";s[u]=function(){b&&(x.clearTimer(b),m(p))},b=x.startTimer(b,v.eventTimeout,s[u])}}for(var f=g.ga.getAll(),d=0,h=f.length;h>d;d++)g.ga(f[d].get("name")+".send",s)}}function m(t){document.location=t}var h=e.Plugin("analytics",{methods:{_setup:a,_resize:i},utilities:{_delegate:o}}),v={autoEvents:!1,filetypes:/\.(zip|exe|dmg|pdf|doc.*|xls.*|ppt.*|mp3|txt|rar|wma|mov|avi|wmv|flv|wav)$/i,eventTimeout:1e3,scrollDepth:!1,scrollStops:5,trackerName:"all"},g=e.window,y=e.$window,w=null,x=h.functions,S=h.events,T=!1,k="analytics-event",D="data-"+k,C={},E=null,$="Site",b=null,L=!1,M=!1}(jQuery,Formstone);