!function(t,e,i){"use strict";function n(t){z.iterate.call(k,c)}function s(){k=t(L.base)}function a(i){var n,a=[N.base,i.customClass,i.rtl?N.rtl:N.ltr];i.maxWidth=i.maxWidth===1/0?"100000px":i.maxWidth,i.mq="(min-width:"+i.minWidth+") and (max-width:"+i.maxWidth+")",i.customControls="object"===t.type(i.controls)&&i.controls.previous&&i.controls.next,e.support.transform||(i.useMargin=!0);var o="",c="",d=[N.control,N.control_previous].join(" "),m=[N.control,N.control_next].join(" ");if(i.controls&&!i.customControls&&(o+='<div class="'+N.controls+'">',o+='<button type="button" class="'+d+'">'+i.labels.previous+"</button>",o+='<button type="button" class="'+m+'">'+i.labels.next+"</button>",o+="</div>"),i.pagination&&(c+='<div class="'+N.pagination+'">',c+="</div>"),i.autoHeight&&a.push(N.auto_height),this.addClass(a.join(" ")).wrapInner('<div class="'+N.wrapper+'"><div class="'+N.container+'"><div class="'+N.canister+'"></div></div></div>').append(o).wrapInner('<div class="'+N.viewport+'"></div>').append(c),i.$viewport=this.find(L.viewport).eq(0),i.$container=this.find(L.container).eq(0),i.$canister=this.find(L.canister).eq(0),i.$controls=this.find(L.controls).eq(0),i.$pagination=this.find(L.pagination).eq(0),i.$paginationItems=i.$pagination.find(L.page),i.$controlPrevious=i.$controlNext=t(""),i.customControls?(i.$controlPrevious=t(i.controls.previous).addClass(d),i.$controlNext=t(i.controls.next).addClass(m)):(i.$controlPrevious=i.$controls.find(L.control_previous),i.$controlNext=i.$controls.find(L.control_next)),i.$controlItems=i.$controlPrevious.add(i.$controlNext),i.index=0,i.enabled=!1,i.leftPosition=0,i.autoTimer=null,i.resizeTimer=null,"object"===t.type(i.show)){var p=i.show,g=[];for(n in p)p.hasOwnProperty(n)&&g.push(n);g.sort(z.sortAsc),i.show={};for(n in g)g.hasOwnProperty(n)&&(i.show[g[n]]={width:parseInt(g[n]),count:p[g[n]]})}u(i),t.fsMediaquery("bind",i.rawGuid,i.mq,{enter:function(){l.call(i.$el,i)},leave:function(){r.call(i.$el,i)}}),s()}function o(e){z.clearTimer(e.autoTimer),z.startTimer(e.resizeTimer),r.call(this,e),t.fsMediaquery("unbind",e.rawGuid),e.$controlItems.removeClass([L.control,N.control_previous,L.control_next,L.visible].join(" ")).off(X.namespace),e.$images.off(X.namespace),e.$canister.fsTouch("destroy"),e.$items.removeClass([N.item,N.visible].join(" ")).unwrap().unwrap().unwrap().unwrap(),e.pagination&&e.$pagination.remove(),e.controls&&e.$controls.remove(),this.removeClass([N.base,N.ltr,N.rtl,N.enabled,N.animated,e.customClass].join(" ")),s()}function r(t){t.enabled&&(z.clearTimer(t.autoTimer),t.enabled=!1,this.removeClass([N.enabled,N.animated].join(" ")).off(X.namespace),t.$canister.fsTouch("destroy").off(X.namespace).attr("style","").css(S,"none"),t.$items.css({width:"",height:""}),t.$images.off(X.namespace),t.$controlItems.off(X.namespace),t.$pagination.html(""),C(t),t.useMargin?t.$canister.css({marginLeft:""}):t.$canister.css(E,""),t.index=0)}function l(t){t.enabled||(t.enabled=!0,this.addClass(N.enabled).on(X.clickTouchStart,L.page,t,b),t.$controlItems.on(X.clickTouchStart,t,$),t.$canister.fsTouch({axis:"x",pan:!0,swipe:!0}).on(X.panStart,t,I).on(X.pan,t,W).on(X.panEnd,t,M).on(X.swipe,t,q).css(S,""),u(t),t.$images.on(X.load,t,f),t.autoAdvance&&(t.autoTimer=z.startTimer(t.autoTimer,t.autoTime,function(){v(t)},!0)),c.call(this,t))}function c(t){if(t.enabled){var e,i,n,s,a,o,r,l;if(t.count=t.$items.length,t.count<1)return C(t),void t.$canister.css({height:""});for(this.removeClass(N.animated),t.containerWidth=t.$container.outerWidth(!1),t.visible=P(t),t.perPage=t.paged?1:t.visible,t.itemMargin=parseInt(t.$items.eq(0).css("marginRight"))+parseInt(t.$items.eq(0).css("marginLeft")),t.itemWidth=(t.containerWidth-t.itemMargin*(t.visible-1))/t.visible,t.itemHeight=0,t.pageWidth=t.paged?t.itemWidth:t.containerWidth,t.pageCount=Math.ceil(t.count/t.perPage),t.canisterWidth=(t.pageWidth+t.itemMargin)*t.pageCount,t.$canister.css({width:t.canisterWidth,height:""}),t.$items.css({width:t.itemWidth,height:""}).removeClass(N.visible),t.pages=[],i=0,n=0;i<t.count;i+=t.perPage){if(a=t.$items.slice(i,i+t.perPage),r=0,a.length<t.perPage&&(a=0===i?t.$items:t.$items.slice(t.$items.length-t.perPage)),o=t.rtl?a.eq(a.length-1):a.eq(0),l=o.position().left,t.autoHeight)for(s=0;s<a.length;s++)e=a.eq(s).outerHeight(),e>r&&(r=e);else r=o.outerHeight();t.pages.push({left:t.rtl?l-(t.canisterWidth-t.pageWidth-t.itemMargin):l,height:r,$items:a}),r>t.itemHeight&&(t.itemHeight=r),n++}t.paged&&(t.pageCount-=t.count%t.visible),t.pageCount<=0&&(t.pageCount=1),t.maxMove=-t.pages[t.pageCount-1].left,t.autoHeight?t.$canister.css({height:t.pages[0].height}):t.matchHeight&&t.$items.css({height:t.itemHeight});var c="";for(i=0;i<t.pageCount;i++)c+='<button type="button" class="'+N.page+'">'+(i+1)+"</button>";t.$pagination.html(c),t.pageCount<=1?C(t):w(t),t.$paginationItems=t.$el.find(L.page),x(t,t.index,!1),setTimeout(function(){t.$el.addClass(N.animated)},5)}}function u(t){t.$items=t.$canister.children().addClass(N.item),t.$images=t.$canister.find("img"),t.totalImages=t.$images.length}function d(t){t.enabled&&m.call(this,t,!1)}function m(t,e){t.$images.off(X.namespace),e!==!1&&t.$canister.html(e),t.index=0,u(t),c.call(this,t)}function p(t,e){t.enabled&&(z.clearTimer(t.autoTimer),x(t,e-1))}function g(t){var e=t.index-1;t.infinite&&0>e&&(e=t.pageCount-1),x(t,e)}function h(t){var e=t.index+1;t.infinite&&e>=t.pageCount&&(e=0),x(t,e)}function f(t){var e=t.data;e.resizeTimer=z.startTimer(e.resizeTimer,20,function(){c.call(e.$el,e)})}function v(t){var e=t.index+1;e>=t.pageCount&&(e=0),x(t,e)}function $(e){z.killEvent(e);var i=e.data,n=i.index+(t(e.currentTarget).hasClass(N.control_next)?1:-1);z.clearTimer(i.autoTimer),x(i,n)}function b(e){z.killEvent(e);var i=e.data,n=i.$paginationItems.index(t(e.currentTarget));z.clearTimer(i.autoTimer),x(i,n)}function x(t,e,i){0>e&&(e=t.infinite?t.pageCount-1:0),e>=t.pageCount&&(e=t.infinite?0:t.pageCount-1),t.count<1||(t.pages[e]&&(t.leftPosition=-t.pages[e].left),t.leftPosition=_(t,t.leftPosition),t.useMargin?t.$canister.css({marginLeft:t.leftPosition}):i===!1?(t.$canister.css(S,"none").css(E,"translateX("+t.leftPosition+"px)"),setTimeout(function(){t.$canister.css(S,"")},5)):t.$canister.css(E,"translateX("+t.leftPosition+"px)"),t.$items.removeClass(N.visible),t.pages[e].$items.addClass(N.visible),t.autoHeight&&t.$canister.css({height:t.pages[e].height}),i!==!1&&e!==t.index&&(t.infinite||e>-1&&e<t.pageCount)&&t.$el.trigger(X.update,[e]),t.index=e,T(t))}function C(t){t.$controls.removeClass(N.visible),t.$controlItems.removeClass(N.visible),t.$pagination.removeClass(N.visible)}function w(t){t.$controls.addClass(N.visible),t.$controlItems.addClass(N.visible),t.$pagination.addClass(N.visible)}function T(t){t.$paginationItems.removeClass(N.active).eq(t.index).addClass(N.active),t.infinite?t.$controlItems.addClass(N.visible):t.pageCount<1?t.$controlItems.removeClass(N.visible):(t.$controlItems.addClass(N.visible),t.index<=0?t.$controlPrevious.removeClass(N.visible):(t.index>=t.pageCount||t.leftPosition===t.maxMove)&&t.$controlNext.removeClass(N.visible))}function P(i){if("object"===t.type(i.show)){for(var n in i.show)if(i.show.hasOwnProperty(n)&&e.windowWidth>=i.show[n].width)return i.fill&&i.count<i.show[n].count?i.count:i.show[n].count;return 1}return i.fill&&i.count<i.show?i.count:i.show}function I(t){var e=t.data;if(e.useMargin)e.leftPosition=parseInt(e.$canister.css("marginLeft"));else{var i=e.$canister.css(E).split(",");e.leftPosition=parseInt(i[4])}e.$canister.css(S,"none"),W(t),e.isTouching=!0}function W(t){var e=t.data;e.touchLeft=_(e,e.leftPosition+t.deltaX),e.useMargin?e.$canister.css({marginLeft:e.touchLeft}):e.$canister.css(E,"translateX("+e.touchLeft+"px)")}function M(t){var e=t.data,i=H(e,t),n=t.deltaX>-50&&t.deltaX<50?e.index:e.index+i;y(e,n)}function q(t){var e=t.data,i=H(e,t),n=e.index+i;y(e,n)}function y(t,e){t.$canister.css(S,""),x(t,e),t.isTouching=!1}function _(t,e){return isNaN(e)?e=0:t.rtl?(e>t.maxMove&&(e=t.maxMove),0>e&&(e=0)):(e<t.maxMove&&(e=t.maxMove),e>0&&(e=0)),e}function H(t,e){return t.rtl?"right"===e.directionX?1:-1:"left"===e.directionX?1:-1}var j=e.Plugin("carousel",{widget:!0,defaults:{autoAdvance:!1,autoHeight:!1,autoTime:8e3,controls:!0,customClass:"",fill:!1,infinite:!1,labels:{next:"Next",previous:"Previous"},matchHeight:!1,maxWidth:1/0,minWidth:"0px",paged:!1,pagination:!0,show:1,rtl:!1,useMargin:!1},classes:["ltr","rtl","viewport","wrapper","container","canister","item","controls","control","pagination","page","animated","enabled","visible","active","auto_height","control_previous","control_next"],events:{update:"update",panStart:"panstart",pan:"pan",panEnd:"panend",swipe:"swipe"},methods:{_construct:a,_destruct:o,_resize:n,disable:r,enable:l,jump:p,previous:g,next:h,reset:d,resize:c,update:m}}),L=j.classes,N=L.raw,X=j.events,z=j.functions,k=[],E=e.transform,S=e.transition}(jQuery,Formstone);